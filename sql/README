
abbreviations used below:
 - rpwd: root mysql password
 - upwd: user mysql password


One-time setup
==============

  -- Run the commands from this section once
  -- 
  -- Notice that mysql root privileges are required.
  -- No other section requires mysql root privileges.

  -- 1) initialize global database
  mysql -uroot -p<rpwd> setup_LSSTGlobal.sql

  -- 2) precreate mysql users
  --
  -- We need to decide how we will get the list of users
  -- and their passwords... through policy?
  -- 
  -- Warning: likely we will need to open remote access 
  -- at least to some domains!
  mysql -uroot -p<rpwd> -e mysql "GRANT ALL ON `<username>\_%`.* TO '<username>'@'localhost' IDENTIFIED BY <upwd>"
  mysql -uroot -p<rpwd> -e mysql "GRANT SELECT ON *.* TO '<username>'@'localhost' IDENTIFIED BY <upwd>"


Per run setup
=============

  -- check available disk space, if too low (say below 10%)
  -- run the cleanupExpiredRuns script (see below), 
  -- if disk space still too low, alert someone and give up


  -- create per run database, using the following naming conventions:
  -- <username>_<DC version><run number or name>,
  -- for example, jbecla_DC3a_123, smm_DC3a_myTestRun, admin_DC3a_final
  mysql -u<username> -p<upwd> -e "CREATE DATABASE <dbName>"


  -- Load schema. Use the appropriate schema file:
  -- lsstSchema4mysqlDC3a.sql or lsstSchema4mysqlDC3b.sql 
  mysql -u<username> -p<upwd> <dbName> <schema file>


  -- load stored procedures and functions
  mysql -u<username> -p<upwd> <dbName> setup_storedFunctions.sql


  -- Load sdqa specific tables
  mysql -u<username> -p<upwd> <dbName> setup_sdqa.sql


  -- load run specific contents and tables
  mysql -u<username> -p<upwd> <dbName> setup_perRunTables.sql


Asynchronous
============
 -- run this once per day, preferably at night
 /DMS/cat/???/scripts/cleanExpiredRuns.py root <rpwd>
